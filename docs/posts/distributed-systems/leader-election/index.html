<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Leader Election – System Design Notes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../favicon.ico" rel="icon">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-5c1aa57916d092647891b8a3fe59897e.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/bootstrap/bootstrap-dark-ee5e052b81fc94e1f9bb89611f476562.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta name="mermaid-theme" content="neutral">
<script src="../../../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../../../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">


<link rel="stylesheet" href="../../../styles.css">
<meta property="og:title" content="Leader Election – System Design Notes">
<meta property="og:description" content="">
<meta property="og:site_name" content="System Design Notes">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">System Design Notes</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/muthuspark"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/krimuthu"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Leader Election</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Distributed Systems</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Leader election is a fundamental problem in distributed systems. It’s the process of selecting a single node from a group of nodes to act as the leader, responsible for coordinating tasks, making decisions, and managing resources. This leader acts as a single point of control, simplifying the system’s overall architecture and ensuring efficient operation. However, the selection process must be fault-tolerant, handling node failures and network partitions gracefully. This post explores various leader election algorithms and provides code examples to illustrate their implementation.</p>
<section id="why-leader-election-is-important" class="level2">
<h2 data-anchor-id="why-leader-election-is-important">Why Leader Election is important</h2>
<p>In distributed systems, where multiple nodes operate independently but need to coordinate, a leader is often necessary for many reasons:</p>
<ul>
<li><strong>Centralized Control:</strong> A single leader simplifies decision-making and avoids conflicts between nodes.</li>
<li><strong>Resource Management:</strong> The leader can manage shared resources, preventing resource starvation and ensuring fairness.</li>
<li><strong>Fault Tolerance:</strong> By electing a new leader when the current one fails, the system can maintain its functionality.</li>
<li><strong>Data Consistency:</strong> Leader election can be a important part of ensuring data consistency across the distributed system.</li>
</ul>
</section>
<section id="common-leader-election-algorithms" class="level2">
<h2 data-anchor-id="common-leader-election-algorithms">Common Leader Election Algorithms</h2>
<p>Several algorithms address the leader election problem, each with its own strengths and weaknesses. Here are a few prominent ones:</p>
<section id="bully-algorithm" class="level3">
<h3 data-anchor-id="bully-algorithm">1. Bully Algorithm</h3>
<p>The Bully Algorithm is a relatively simple algorithm where each node “bullies” its way to leadership. The algorithm works as follows:</p>
<ol type="1">
<li><strong>Node Failure Detection:</strong> If a node detects the leader’s failure (through a timeout or heartbeat mechanism), it initiates an election.</li>
<li><strong>Election Broadcast:</strong> The node broadcasts an “election” message to all nodes with higher IDs.</li>
<li><strong>Response from Higher-ID Nodes:</strong> If a higher-ID node responds, the initiating node stops its election process and recognizes the higher-ID node as the leader.</li>
<li><strong>No Response from Higher-ID Nodes:</strong> If the initiating node receives no response from higher-ID nodes, it declares itself the leader and broadcasts a “leader” message to all other nodes.</li>
</ol>
<p><strong>Diagram:</strong></p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">graph LR
    A[Node A] --&gt; B{Leader Failure?};
    B -- Yes --&gt; C[Initiate Election];
    B -- No --&gt; D[Continue Operation];
    C --&gt; E[Broadcast Election];
    E --&gt; F{Higher ID Response?};
    F -- Yes --&gt; G[Stop Election];
    F -- No --&gt; H[Declare Leader];
    H --&gt; I[Broadcast Leader];
    G --&gt; D;
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>This diagram illustrates a Leader Election algorithm in a distributed system:</p>
<p><strong>1. Starting Point:</strong></p>
<ul>
<li>Node A monitors current leader’s status</li>
<li>Decision point checks for leader failure</li>
</ul>
<p><strong>2. Election Process:</strong></p>
<ul>
<li>If leader fails: Initiates election process</li>
<li>If leader alive: Continues normal operation</li>
<li>Election broadcast sent to all nodes</li>
</ul>
<p><strong>3. Decision Logic:</strong></p>
<ul>
<li>Nodes respond based on ID priority</li>
<li>If higher ID node responds: Current node stops election</li>
<li>If no higher ID responds: Node declares itself leader</li>
<li>New leader broadcasts status to all nodes</li>
</ul>
<p><strong>4. Resolution:</strong></p>
<ul>
<li>Failed election nodes return to normal operation</li>
<li>Successful election establishes new leader</li>
<li>System resumes normal operation under new leader</li>
</ul>
<p>The flow ensures reliable leader selection while preventing election conflicts through ID-based priority.</p>
</section>
<section id="ring-based-algorithm" class="level3">
<h3 data-anchor-id="ring-based-algorithm">2. Ring-based Algorithm</h3>
<p>The Ring-based algorithm utilizes a logical ring structure where each node communicates only with its immediate neighbors. The algorithm proceeds as follows:</p>
<ol type="1">
<li><strong>Election Initiation:</strong> A node detects a leader failure and initiates the election by sending an election message to its neighbor.</li>
<li><strong>Message Passing:</strong> The message passes around the ring until it reaches a node that has a higher ID than all the nodes it has encountered.</li>
<li><strong>Leader Election:</strong> The node with the highest ID becomes the leader and broadcasts its leadership to the ring.</li>
</ol>
<p><strong>Diagram:</strong></p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">graph LR
    A[Node 1] --&gt; B[Node 2];
    B --&gt; C[Node 3];
    C --&gt; D[Node 4];
    D --&gt; A;
    A --&gt; E{Election Message};
    E --&gt; B;
    B --&gt; F{Higher ID?};
    F -- Yes --&gt; G[Become Leader];
    F -- No --&gt; B;
    G --&gt; H[Broadcast Leadership];
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>This diagram shows a ring-based leader election algorithm:</p>
<p><strong>1. Network Structure:</strong></p>
<ul>
<li>Nodes arranged in a ring (1→2→3→4→1)</li>
<li>Messages flow clockwise through ring</li>
</ul>
<p><strong>2. Election Process:</strong></p>
<ul>
<li>Node 1 initiates election message</li>
<li>Each node compares its ID with message</li>
<li>Higher ID nodes can claim leadership</li>
<li>Lower ID nodes pass message along</li>
</ul>
<p><strong>3. Leadership Resolution:</strong></p>
<ul>
<li>Winner broadcasts leadership status</li>
<li>Message circulates until consensus</li>
<li>System stabilizes under new leader</li>
</ul>
<p>This forms a Chang-Roberts ring algorithm implementation, ensuring single leader selection through ordered ID comparison.</p>
</section>
<section id="paxos-algorithm" class="level3">
<h3 data-anchor-id="paxos-algorithm">3. Paxos Algorithm</h3>
<p>Paxos is a more complex algorithm, designed for highly fault-tolerant environments. It uses multiple rounds of message passing to ensure consensus on the leader selection. While the details of Paxos are quite intricate, its core principle involves proposing candidates and reaching agreement among a quorum of nodes. It handles network partitions and node failures more gracefully than simpler algorithms. For more information, please refer to the <a href="../../../posts/distributed-systems/distributed-consensus/index.html">Distributed Consensus</a> page.</p>
</section>
</section>
<section id="choosing-the-right-algorithm" class="level2">
<h2 data-anchor-id="choosing-the-right-algorithm">Choosing the Right Algorithm</h2>
<p>The choice of leader election algorithm depends on the specific requirements of the distributed system. The Bully Algorithm is simple to implement but may not be suitable for large-scale systems. Ring-based algorithms are efficient for smaller systems with a known topology. Paxos is preferred for highly reliable and fault-tolerant systems, but its implementation is more complex.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/system-design\.muthu\.co\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2025, Muthukrishnan</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>