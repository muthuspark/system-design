<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Failure Detection – System Design Notes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../favicon.ico" rel="icon">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-5c1aa57916d092647891b8a3fe59897e.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/bootstrap/bootstrap-dark-ee5e052b81fc94e1f9bb89611f476562.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta name="mermaid-theme" content="neutral">
<script src="../../../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../../../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">


<link rel="stylesheet" href="../../../styles.css">
<meta property="og:title" content="Failure Detection – System Design Notes">
<meta property="og:description" content="">
<meta property="og:site_name" content="System Design Notes">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">System Design Notes</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/muthuspark"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/krimuthu"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Failure Detection</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Distributed Systems</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Failure detection is important in building robust and reliable systems. Whether you’re managing a complex microservice architecture or a single server application, the ability to quickly and accurately identify failures is paramount. This post will delve into the various strategies and techniques used for failure detection, examining their strengths and weaknesses, and providing practical examples to illustrate their application.</p>
<section id="types-of-failures" class="level2">
<h2 data-anchor-id="types-of-failures">Types of Failures</h2>
<p>Before exploring detection methods, it’s crucial to understand the different types of failures we aim to detect:</p>
<ul>
<li><p><strong>Hardware Failures:</strong> These encompass issues like disk drive crashes, CPU malfunctions, or power outages. These are often abrupt and catastrophic.</p></li>
<li><p><strong>Software Failures:</strong> These range from simple bugs and exceptions to more complex issues like deadlocks or memory leaks. They can be intermittent or persistent.</p></li>
<li><p><strong>Network Failures:</strong> Network connectivity problems, packet loss, and high latency all contribute to application failures. These are often difficult to pinpoint as the source may not be immediately obvious.</p></li>
<li><p><strong>Application Failures:</strong> These are failures within the application itself, stemming from bugs, resource exhaustion, or unexpected inputs. They often manifest as errors, crashes, or degraded performance.</p></li>
</ul>
</section>
<section id="failure-detection-strategies" class="level2">
<h2 data-anchor-id="failure-detection-strategies">Failure Detection Strategies</h2>
<p>Several strategies can be employed for failure detection, often used in conjunction for optimal coverage:</p>
<section id="heartbeat-monitoring" class="level3">
<h3 data-anchor-id="heartbeat-monitoring">1. Heartbeat Monitoring</h3>
<p>This is a fundamental technique where the monitored component (e.g., a server, microservice) periodically sends a “heartbeat” signal to a central monitoring system. The absence of a heartbeat within a predefined timeframe triggers an alert, indicating a potential failure.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">graph LR
    A[Monitored Component] --&gt; B(Heartbeat Signal);
    B --&gt; C[Monitoring System];
    C -- No Heartbeat --&gt; D[Alert Triggered];
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p><strong>Example (Python with <code>schedule</code> library):</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> schedule</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> send_heartbeat():</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>        response <span class="op">=</span> requests.post(<span class="st">"http://monitoring-system/heartbeat"</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>        response.raise_for_status()  <span class="co"># Raise HTTPError for bad responses (4xx or 5xx)</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Heartbeat sent successfully"</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> requests.exceptions.RequestException <span class="im">as</span> e:</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Error sending heartbeat: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>schedule.every(<span class="dv">10</span>).seconds.do(send_heartbeat)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    schedule.run_pending()</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    time.sleep(<span class="dv">1</span>)</span></code></pre></div>
</section>
<section id="monitoring-key-metrics" class="level3">
<h3 data-anchor-id="monitoring-key-metrics">2. Monitoring Key Metrics</h3>
<p>This approach involves continuously tracking critical performance indicators (KPIs) such as CPU usage, memory consumption, disk I/O, network throughput, and request latency. Significant deviations from established baselines trigger alerts, suggesting potential problems.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">graph LR
    A[Application] --&gt; B(Metrics);
    B --&gt; C[Monitoring System];
    C -- Threshold Exceeded --&gt; D[Alert Triggered];
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>Tools like Prometheus and Grafana are commonly used for this purpose.</p>
</section>
<section id="exception-handling-and-logging" class="level3">
<h3 data-anchor-id="exception-handling-and-logging">3. Exception Handling and Logging</h3>
<p>Robust exception handling and comprehensive logging within the application itself provide valuable insights into internal failures. Analyzing log files can help identify recurring errors, pinpoint the root cause of failures, and assist in proactive mitigation.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">sequenceDiagram
    participant C as Client
    participant A as Application
    participant L as Logger
    participant DB as Database
    participant M as Monitoring

    rect rgb(240, 255, 240)
        Note right of C: Successful Flow
        C-&gt;&gt;A: Request
        A-&gt;&gt;DB: Query Data
        DB--&gt;&gt;A: Data Response
        A-&gt;&gt;L: Log Success
        A--&gt;&gt;C: Success Response
        L-&gt;&gt;M: Aggregate Logs
    end

    rect rgb(255, 240, 240)
        Note right of C: Error Flow
        C-&gt;&gt;A: Request
        A-&gt;&gt;DB: Query Data
        DB--xA: Connection Error
        A-&gt;&gt;L: Log Error Details
        Note right of L: Error Level: SEVERE&lt;br/&gt;Stack Trace&lt;br/&gt;Timestamp&lt;br/&gt;Context
        A--&gt;&gt;C: Error Response
        L-&gt;&gt;M: Alert on Error
        M-&gt;&gt;M: Trigger Alert
    end
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>The diagram shows:</p>
<ul>
<li>Successful Flow (Green):
<ul>
<li>Normal request processing</li>
<li>Successful database interaction</li>
<li>Success logging</li>
<li>Metrics aggregation</li>
</ul></li>
<li>Error Flow (Red):
<ul>
<li>Database connection failure</li>
<li>Detailed error logging (severity, stack trace, context)</li>
<li>Client error notification</li>
<li>Alert triggering for monitoring</li>
</ul></li>
</ul>
<p>This helps in: - Real-time error detection - Root cause analysis - Pattern identification - Proactive issue resolution - System reliability improvement</p>
</section>
<section id="health-checks" class="level3">
<h3 data-anchor-id="health-checks">4. Health Checks</h3>
<p>Applications can expose dedicated health check endpoints that return a status indicating their operational state. These checks can be simple (e.g., returning “OK”) or more sophisticated, verifying database connectivity, external service availability, or internal component functionality.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">sequenceDiagram
    participant M as Monitoring System
    participant A as Application
    participant DB as Database
    participant E as External Service

    rect rgb(240, 255, 240)
        Note right of M: Healthy System
        M-&gt;&gt;A: GET /health
        A-&gt;&gt;DB: Check Connection
        DB--&gt;&gt;A: Connected
        A-&gt;&gt;E: Check Availability
        E--&gt;&gt;A: Available
        A--&gt;&gt;M: Status: 200 OK
    end

    rect rgb(255, 240, 240)
        Note right of M: System with Issues
        M-&gt;&gt;A: GET /health
        A-&gt;&gt;DB: Check Connection
        DB--&gt;&gt;A: Connected
        A-&gt;&gt;E: Check Availability
        E--xA: Timeout
        A--&gt;&gt;M: Status: 503 Service Unavailable
    end

</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>The health check diagram illustrates two key scenarios:</p>
<ol type="1">
<li>Healthy System (Green):</li>
</ol>
<ul>
<li>Monitoring system pings application’s /health endpoint</li>
<li>Application verifies database connection</li>
<li>Application checks external service availability</li>
<li>All components respond successfully</li>
<li>Returns 200 OK status</li>
</ul>
<ol start="2" type="1">
<li>System with Issues (Red):</li>
</ol>
<ul>
<li>Same health check process initiated</li>
<li>Database connection succeeds</li>
<li>External service fails to respond</li>
<li>Application returns 503 Service Unavailable</li>
</ul>
<p>This approach enables: - Early detection of component failures - Automated system monitoring - Quick identification of problem areas - Proactive maintenance before user impact</p>
<p>The status codes (200/503) help automated systems make decisions about service availability and potential failover actions.</p>
</section>
<section id="timeouts-and-retries" class="level3">
<h3 data-anchor-id="timeouts-and-retries">5. Timeouts and Retries</h3>
<p>When interacting with external services or components, implementing timeouts and retry mechanisms can prevent applications from hanging indefinitely due to unresponsive dependencies. Timeouts provide a graceful failure mechanism, while retries offer a chance to recover from transient network issues.</p>
<p>For example, when making a request to an external API, a timeout can be set to 5 seconds. If the API doesn’t respond within that time, the request is terminated and a retry can be triggered. This approach can be used to handle temporary network issues or high latency.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">sequenceDiagram
    participant C as Client
    participant API as External API
    
    rect rgb(240, 240, 240)
        Note right of C: First Attempt
        C-&gt;&gt;API: Make API Request
        activate API
        Note right of C: Timeout (5s)
        API--xC: No Response
        deactivate API
    end

    rect rgb(230, 240, 250)
        Note right of C: Retry Attempt
        C-&gt;&gt;API: Retry API Request
        activate API
        API-&gt;&gt;C: Successful Response
        deactivate API
    end

</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="checksums-and-data-integrity-verification" class="level3">
<h3 data-anchor-id="checksums-and-data-integrity-verification">6. Checksums and Data Integrity Verification</h3>
<p>For data-intensive applications, ensuring data integrity is critical to detect corruption or inconsistencies. Checksums are one of the simplest and most effective methods for achieving this. A checksum is a small-sized datum derived from a block of digital data for the purpose of detecting errors that may have been introduced during its transmission or storage.</p>
<p>For example, when a file is transmitted over a network, a checksum can be computed before and after transmission. If the checksums match, the file is likely intact; if not, it indicates corruption.</p>
<p><strong>Example (Python with hashlib):</strong></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> hashlib</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_checksum(data):</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> hashlib.md5(data).hexdigest()</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulating data transmission</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>original_data <span class="op">=</span> <span class="st">b'This is some important data.'</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>checksum_before <span class="op">=</span> calculate_checksum(original_data)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Assume data is transmitted and received without errors</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>received_data <span class="op">=</span> original_data</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>checksum_after <span class="op">=</span> calculate_checksum(received_data)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> checksum_before <span class="op">==</span> checksum_after:</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Data integrity verified. Checksums match."</span>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Data corruption detected. Checksums do not match."</span>)</span></code></pre></div>
<p>In this example, the <code>hashlib.md5()</code> function is used to calculate the checksum of the data. By comparing the checksums before and after data transmission, we can verify the integrity of the data.</p>
</section>
</section>
<section id="challenges-in-failure-detection" class="level2">
<h2 data-anchor-id="challenges-in-failure-detection">Challenges in Failure Detection</h2>
<p>Despite the various techniques available, several challenges remain:</p>
<ul>
<li><p><strong>False positives:</strong> Alerts triggered by temporary fluctuations or non-critical events can lead to alert fatigue and hinder the identification of genuine failures.</p></li>
<li><p><strong>False negatives:</strong> Failures may go undetected due to incomplete monitoring or inadequate alerting configurations.</p></li>
<li><p><strong>Complex systems:</strong> In large, distributed systems, identifying the root cause of a failure can be extremely complex, requiring sophisticated tracing and correlation techniques.</p></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/system-design\.muthu\.co\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2025, Muthukrishnan</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>