<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Strong Consistency – System Design Notes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../favicon.ico" rel="icon">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-5c1aa57916d092647891b8a3fe59897e.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/bootstrap/bootstrap-dark-ee5e052b81fc94e1f9bb89611f476562.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta name="mermaid-theme" content="neutral">
<script src="../../../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../../../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">


<link rel="stylesheet" href="../../../styles.css">
<meta property="og:title" content="Strong Consistency – System Design Notes">
<meta property="og:description" content="">
<meta property="og:site_name" content="System Design Notes">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">System Design Notes</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/muthuspark"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/krimuthu"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Strong Consistency</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Distributed Systems</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Strong consistency, in the context of distributed systems, refers to a guarantee that all clients see the same view of data at all times. This contrasts sharply with weaker consistency models, where temporary inconsistencies might exist due to network latency or the asynchronous nature of distributed operations. While seemingly ideal, achieving strong consistency often comes at the cost of performance and scalability. This post goes deep into the intricacies of strong consistency, exploring its implications, implementation challenges, and various approaches.</p>
<section id="what-is-strong-consistency" class="level2">
<h2 data-anchor-id="what-is-strong-consistency">What is Strong Consistency?</h2>
<p>Imagine a shared whiteboard used by multiple people. With strong consistency, any change made by one person is instantly visible to everyone else. There’s no lag, no conflicting updates, and the whiteboard always reflects a single, unified truth. Formally, strong consistency adheres to the principle of <strong>linearizability</strong>.</p>
<p>Linearizability dictates that every operation appears to take effect instantaneously at some point between its invocation and its response. It’s as if all operations happen sequentially in a single global order, even if they’re physically executed on different machines across a network.</p>
<section id="the-read-your-writes-guarantee" class="level3">
<h3 data-anchor-id="the-read-your-writes-guarantee">The Read Your Writes Guarantee</h3>
<p>A key characteristic of strong consistency is the <strong>read your writes</strong> guarantee. This ensures that after a client successfully writes data, any subsequent read by the same client will return the newly written value.</p>
</section>
<section id="the-monotonic-reads-guarantee" class="level3">
<h3 data-anchor-id="the-monotonic-reads-guarantee">The Monotonic Reads Guarantee</h3>
<p>Another important aspect is <strong>monotonic reads</strong>. If a client reads a value <code>x</code>, any subsequent read by the same client will never return a value older than <code>x</code>. This prevents clients from seeing older versions of data after having seen a newer one.</p>
</section>
<section id="the-monotonic-writes-guarantee" class="level3">
<h3 data-anchor-id="the-monotonic-writes-guarantee">The Monotonic Writes Guarantee</h3>
<p>The <strong>monotonic writes</strong> guarantee ensures that write operations from a client are observed in the order they were issued. This is crucial for maintaining data integrity and preventing unexpected behavior.</p>
</section>
<section id="the-consistent-reads-guarantee" class="level3">
<h3 data-anchor-id="the-consistent-reads-guarantee">The Consistent Reads Guarantee</h3>
<p>Finally, the <strong>consistent reads</strong> guarantee states that any two reads performed by a client will return the same value if no intervening writes have occurred.</p>
</section>
</section>
<section id="implementing-strong-consistency-challenges-and-techniques" class="level2">
<h2 data-anchor-id="implementing-strong-consistency-challenges-and-techniques">Implementing Strong Consistency: Challenges and Techniques</h2>
<p>Achieving strong consistency in a distributed environment is far from trivial. The primary challenge lies in coordinating updates across multiple machines, especially in the face of network partitions and failures. Several techniques are employed to mitigate these challenges:</p>
<section id="centralized-locking-pessimistic-approach" class="level3">
<h3 data-anchor-id="centralized-locking-pessimistic-approach">1. Centralized Locking (Pessimistic Approach)</h3>
<p>This traditional approach uses a central lock manager to control access to shared data. Before any write operation, a client acquires a lock. Only one client can hold the lock at a time, ensuring exclusive access and preventing conflicts. However, this approach can be a significant bottleneck, especially under high load.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">graph LR
    A[Client 1] --&gt; B(Lock Manager);
    B --&gt; C{Acquire Lock};
    C -- Success --&gt; D[Write Data];
    D --&gt; E(Lock Manager);
    E --&gt; F{Release Lock};
    G[Client 2] --&gt; B;
    B --&gt; H{Acquire Lock};
    H -- Blocked --&gt; I[Wait];
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="distributed-consensus-algorithms-e.g.-paxos-raft" class="level3">
<h3 data-anchor-id="distributed-consensus-algorithms-e.g.-paxos-raft">2. Distributed Consensus Algorithms (e.g., Paxos, Raft)</h3>
<p>These sophisticated algorithms provide a mechanism for achieving agreement among multiple replicas of the data. They ensure that all replicas contain the same data, even in the presence of failures. While robust, these algorithms are complex and can introduce latency.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">graph LR
    A[Replica 1] --&gt; B(Consensus Algorithm);
    B --&gt; C[Replica 2];
    B --&gt; D[Replica 3];
    C --&gt; E[Write Data];
    D --&gt; E;
    E --&gt; F[All Replicas Consistent];
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="multi-version-concurrency-control-mvcc" class="level3">
<h3 data-anchor-id="multi-version-concurrency-control-mvcc">3. Multi-Version Concurrency Control (MVCC)</h3>
<p>MVCC allows concurrent access to data by maintaining multiple versions of the data. Each transaction operates on a specific version, preventing conflicts. This approach can improve concurrency but adds complexity in managing versions and garbage collection.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">sequenceDiagram
    participant T1 as Transaction 1
    participant DB as Database
    participant T2 as Transaction 2
    
    Note over DB: Initial Value: X = 100 (v1)
    
    T1-&gt;&gt;DB: Begin Transaction
    T1-&gt;&gt;DB: Read X (v1: 100)
    
    T2-&gt;&gt;DB: Begin Transaction
    T2-&gt;&gt;DB: Read X (v1: 100)
    
    T1-&gt;&gt;DB: Update X = 150
    Note over DB: Creates X (v2: 150)
    
    T2-&gt;&gt;DB: Still sees X (v1: 100)
    T2-&gt;&gt;DB: Update X = 200
    Note over DB: Creates X (v3: 200)
    
    T1-&gt;&gt;DB: Commit
    Note over DB: v1 marked for cleanup
    
    T2-&gt;&gt;DB: Commit
    Note over DB: v2 marked for cleanup
    
    Note over DB: Final Value: X = 200 (v3)

</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>The diagram shows:</p>
<ol type="1">
<li>Each transaction sees its own version</li>
<li>Updates create new versions</li>
<li>Old versions marked for cleanup after commit</li>
<li>No blocking between concurrent transactions</li>
<li>Final state reflects last committed change</li>
</ol>
</section>
</section>
<section id="trade-offs-of-strong-consistency" class="level2">
<h2 data-anchor-id="trade-offs-of-strong-consistency">Trade-offs of Strong Consistency</h2>
<p>Strong consistency offers the advantage of simplicity and predictable behavior. However, it comes with substantial performance and scalability challenges. The need for coordination and synchronization can introduce latency and reduce throughput, making it unsuitable for applications requiring high performance or low latency.</p>
<p>For example, in a distributed database, every write operation must be propagated to all replicas before it is considered complete. This can lead to increased latency and lower throughput, as the system must wait for all replicas to confirm the write before returning the result to the client. Additionally, the need for coordination between replicas can lead to increased complexity, as the system must handle edge cases such as network partitions and node failures.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/system-design\.muthu\.co\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2025, Muthukrishnan</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>