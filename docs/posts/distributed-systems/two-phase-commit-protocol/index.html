<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Two-Phase Commit Protocol – System Design Notes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../favicon.ico" rel="icon">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-5c1aa57916d092647891b8a3fe59897e.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/bootstrap/bootstrap-dark-ee5e052b81fc94e1f9bb89611f476562.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta name="mermaid-theme" content="neutral">
<script src="../../../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../../../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">


<link rel="stylesheet" href="../../../styles.css">
<meta property="og:title" content="Two-Phase Commit Protocol – System Design Notes">
<meta property="og:description" content="">
<meta property="og:site_name" content="System Design Notes">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">System Design Notes</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/muthuspark"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/krimuthu"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Two-Phase Commit Protocol</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Distributed Systems</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>The Two-Phase Commit (2PC) protocol is a critical component in distributed systems, ensuring data consistency across multiple databases or resources when performing transactions that span multiple nodes. Imagine a scenario where you’re transferring money between two bank accounts located on different servers. You wouldn’t want one account debited without the other being credited, leading to data corruption and financial inconsistencies. This is where 2PC comes in to save the day. It guarantees atomicity – either all participating nodes successfully commit the transaction, or none do. Let’s dive deep into how it works.</p>
<section id="phases-of-2pc" class="level2">
<h2 data-anchor-id="phases-of-2pc">Phases of 2PC</h2>
<p>The Two-Phase Commit protocol, as its name suggests, involves two distinct phases:</p>
<p><strong>Phase 1: The Prepare Phase</strong></p>
<ol type="1">
<li><p><strong>Transaction Manager (TM) initiates:</strong> A designated coordinator, often called the Transaction Manager (TM), initiates the transaction. It sends a “prepare” message to each participating node (also known as Resource Managers or RMs).</p></li>
<li><p><strong>Resource Managers (RMs) prepare:</strong> Each RM receives the “prepare” message. It checks if it can successfully commit the changes locally without encountering any errors (e.g., disk space issues, deadlocks).</p></li>
<li><p><strong>RM Response:</strong> The RM sends a “vote” back to the TM. This vote is either:</p>
<ul>
<li><strong>Yes (Vote Commit):</strong> The RM can successfully commit the changes.</li>
<li><strong>No (Vote Abort):</strong> The RM encountered an issue and cannot commit.</li>
</ul></li>
</ol>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">sequenceDiagram
    participant TM as Transaction Manager
    participant RM1 as Resource Manager 1
    participant RM2 as Resource Manager 2

    Note over TM,RM2: Phase 1: Prepare
    TM-&gt;&gt;RM1: Prepare
    TM-&gt;&gt;RM2: Prepare
    RM1--&gt;&gt;TM: Vote Yes
    RM2--&gt;&gt;TM: Vote Yes

    Note over TM,RM2: Phase 2: Commit
    TM-&gt;&gt;RM1: Commit
    TM-&gt;&gt;RM2: Commit
    RM1--&gt;&gt;TM: Acknowledgment
    RM2--&gt;&gt;TM: Acknowledgment

    Note over TM: Transaction Complete
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>The Two-Phase Commit diagram illustrates the distributed transaction protocol:</p>
<p>Phase 1 (Prepare):</p>
<ul>
<li>Transaction Manager (TM) sends prepare message to both Resource Managers (RMs)</li>
<li>Each RM verifies if it can commit its part</li>
<li>RMs respond with “Vote Yes” if ready to commit</li>
<li>If any RM votes “No”, TM would initiate rollback</li>
</ul>
<p>Phase 2 (Commit):</p>
<ul>
<li>After receiving all “Yes” votes, TM sends commit messages</li>
<li>RMs finalize their transactions</li>
<li>RMs send acknowledgments to TM</li>
<li>Transaction completes successfully</li>
</ul>
<p>Key Points:</p>
<ul>
<li>Ensures atomic transactions across distributed systems</li>
<li>All participants must agree before committing</li>
<li>Protocol handles failure scenarios (though not shown in diagram)</li>
<li>Provides consistency but can impact performance due to waiting for all responses</li>
</ul>
<p><strong>Phase 2: The Commit/Abort Phase</strong></p>
<ol type="1">
<li><p><strong>TM Decision:</strong> The TM collects all the votes from the RMs. If all votes are “Yes,” it proceeds to commit; otherwise, it aborts the transaction.</p></li>
<li><p><strong>Commit/Abort Messages:</strong> The TM sends a “commit” message to all RMs if all votes were “Yes.” If any vote was “No,” or if the TM itself fails, it sends an “abort” message.</p></li>
<li><p><strong>RM Action:</strong> RMs execute the corresponding commit or abort operation based on the message received from the TM.</p></li>
</ol>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">sequenceDiagram
    participant TM as Transaction Manager
    participant RM1 as Resource Manager 1
    participant RM2 as Resource Manager 2

    rect rgb(240, 255, 240)
        Note over TM,RM2: Success Scenario
        TM-&gt;&gt;RM1: Prepare
        TM-&gt;&gt;RM2: Prepare
        RM1--&gt;&gt;TM: Vote Yes
        RM2--&gt;&gt;TM: Vote Yes
        Note over TM: Decision: Commit
        TM-&gt;&gt;RM1: Commit
        TM-&gt;&gt;RM2: Commit
        RM1--&gt;&gt;TM: Ack
        RM2--&gt;&gt;TM: Ack
        Note over TM: Transaction Complete
    end

    rect rgb(255, 240, 240)
        Note over TM,RM2: Failure Scenario
        TM-&gt;&gt;RM1: Prepare
        TM-&gt;&gt;RM2: Prepare
        RM1--&gt;&gt;TM: Vote Yes
        RM2--&gt;&gt;TM: Vote No
        Note over TM: Decision: Abort
        TM-&gt;&gt;RM1: Abort
        TM-&gt;&gt;RM2: Abort
        RM1--&gt;&gt;TM: Ack
        RM2--&gt;&gt;TM: Ack
        Note over TM: Transaction Aborted
    end
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>Success Scenario (Green):</p>
<ol type="1">
<li><p>Prepare Phase:</p>
<ul>
<li>TM sends prepare messages</li>
<li>Both RMs vote Yes</li>
<li>TM decides to commit</li>
</ul></li>
<li><p>Commit Phase:</p>
<ul>
<li>TM sends commit messages</li>
<li>RMs execute changes</li>
<li>RMs acknowledge completion</li>
</ul></li>
</ol>
<p>Failure Scenario (Red):</p>
<ol type="1">
<li><p>Prepare Phase:</p>
<ul>
<li>TM sends prepare messages</li>
<li>RM1 votes Yes</li>
<li>RM2 votes No</li>
<li>TM decides to abort</li>
</ul></li>
<li><p>Abort Phase:</p>
<ul>
<li>TM sends abort messages</li>
<li>RMs rollback changes</li>
<li>RMs acknowledge abort</li>
</ul></li>
</ol>
<p>Key Features:</p>
<ul>
<li>Atomic: All operations either complete or none do</li>
<li>Consistent: All RMs must agree before committing</li>
<li>Isolated: Intermediate states not visible</li>
<li>Durable: Changes persist after completion</li>
</ul>
</section>
<section id="code-example-conceptual-python" class="level2">
<h2 data-anchor-id="code-example-conceptual-python">Code Example (Conceptual Python)</h2>
<p>This is a simplified illustration, omitting error handling and network communication details for clarity:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> TransactionManager:</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> prepare(<span class="va">self</span>, resource_managers):</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>        votes <span class="op">=</span> {}</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> rm <span class="kw">in</span> resource_managers:</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>            vote <span class="op">=</span> rm.prepare()</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>            votes[rm] <span class="op">=</span> vote</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> votes</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> commit_or_abort(<span class="va">self</span>, votes):</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">all</span>(vote <span class="op">==</span> <span class="st">"yes"</span> <span class="cf">for</span> vote <span class="kw">in</span> votes.values()):</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> rm <span class="kw">in</span> votes:</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>                rm.commit()</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> rm <span class="kw">in</span> votes:</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>                rm.abort()</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> ResourceManager:</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> prepare(<span class="va">self</span>):</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Simulate checking if local commit is possible</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>        <span class="co"># ... some database interaction or resource check ...</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"yes"</span>  <span class="co"># or "no"</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>resource_managers <span class="op">=</span> [ResourceManager(), ResourceManager()]</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>transaction_manager <span class="op">=</span> TransactionManager()</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>votes <span class="op">=</span> transaction_manager.prepare(resource_managers)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>transaction_manager.commit_or_abort(votes)</span></code></pre></div>
</section>
<section id="challenges-and-limitations-of-2pc" class="level2">
<h2 data-anchor-id="challenges-and-limitations-of-2pc">Challenges and Limitations of 2PC</h2>
<p>While 2PC ensures atomicity, it’s not without its drawbacks:</p>
<ul>
<li><strong>Blocking:</strong> RMs are blocked until the TM decides whether to commit or abort. This can lead to performance bottlenecks, especially in large distributed systems.</li>
<li><strong>Single Point of Failure:</strong> The TM is a single point of failure. If the TM crashes during the process, the transaction might remain in an indeterminate state, requiring manual intervention.</li>
<li><strong>Network Partitions:</strong> Network issues can disrupt communication between the TM and RMs, resulting in potential inconsistencies.</li>
</ul>
<p>These limitations have led to the development of alternative protocols like Three-Phase Commit (3PC) and Paxos, which address some of the challenges of 2PC. However, 2PC remains a widely used and understood approach for ensuring data consistency in distributed transactions.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/system-design\.muthu\.co\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2025, Muthukrishnan</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>