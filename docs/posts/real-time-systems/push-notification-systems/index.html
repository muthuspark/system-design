<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Push Notification Systems – System Design Notes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../favicon.ico" rel="icon">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-5c1aa57916d092647891b8a3fe59897e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta name="mermaid-theme" content="neutral">
<script src="../../../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../../../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">


<link rel="stylesheet" href="../../../styles.css">
<meta property="og:title" content="Push Notification Systems – System Design Notes">
<meta property="og:description" content="">
<meta property="og:site_name" content="System Design Notes">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">System Design Notes</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/muthuspark"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/krimuthu"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Push Notification Systems</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Real-Time Systems</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Push notifications have become an indispensable part of the modern mobile application landscape. They allow apps to send timely updates and relevant information directly to users’ devices, even when the app isn’t actively running. This capability significantly enhances user engagement and retention. This post will explore the intricacies of push notification systems, delving into their architecture, different protocols, and implementation considerations.</p>
<section id="understanding-the-architecture" class="level2">
<h2 data-anchor-id="understanding-the-architecture">Understanding the Architecture</h2>
<p>A robust push notification system involves several key components working in concert:</p>
<ul>
<li><p><strong>App Server:</strong> This is the central hub of the system. It receives requests from the application, handles user data, and sends messages to the notification service. It often includes features for managing user segments, scheduling notifications, and analyzing notification performance.</p></li>
<li><p><strong>Notification Service (Push Provider):</strong> This is a third-party service (like Firebase Cloud Messaging, Apple Push Notification service (APNs), or Amazon SNS) that manages the actual delivery of notifications to devices. These services handle the complexities of connecting to different operating systems and managing the device tokens.</p></li>
<li><p><strong>Mobile Device:</strong> This is the end recipient of the notification. The device maintains a persistent connection (or regularly checks for updates) with the notification service.</p></li>
<li><p><strong>Mobile Application:</strong> This interacts with the app server to request notifications and receives notifications from the notification service. It displays notifications to the user according to the operating system guidelines.</p></li>
</ul>
<p>Here’s a visual representation of this architecture using a Diagram:</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">graph LR
    A[App Server] --&gt; B(Notification Service);
    B --&gt; C[Mobile Device];
    D[Mobile Application] --&gt; A;
    D --&gt; C;
    subgraph " "
        B;
    end
    style B fill:#ccf,stroke:#333,stroke-width:2px
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="protocols-and-technologies" class="level2">
<h2 data-anchor-id="protocols-and-technologies">Protocols and Technologies</h2>
<p>Different operating systems utilize different protocols for push notifications:</p>
<ul>
<li><p><strong>Apple Push Notification service (APNs):</strong> Apple’s proprietary service for iOS and macOS devices. It utilizes TCP connections and certificates for secure communication. APNs relies heavily on device tokens, unique identifiers assigned to each device.</p></li>
<li><p><strong>Firebase Cloud Messaging (FCM):</strong> Google’s cross-platform messaging solution that supports Android, iOS, and web. It’s built on top of the legacy Google Cloud Messaging (GCM) and offers features like topic messaging, message prioritization, and analytics.</p></li>
<li><p><strong>Amazon Simple Notification Service (SNS):</strong> A flexible, scalable service that can push messages to various endpoints, including mobile devices, email addresses, and other AWS services.</p></li>
</ul>
</section>
<section id="implementing-push-notifications-a-simplified-example-fcm" class="level2">
<h2 data-anchor-id="implementing-push-notifications-a-simplified-example-fcm">Implementing Push Notifications: A Simplified Example (FCM)</h2>
<p>This example demonstrates a basic implementation using Firebase Cloud Messaging (FCM) for Android. Note that this is a simplified illustration; a production-ready system would require more robust error handling and security measures.</p>
<p><strong>Server-Side (Node.js with Admin SDK):</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> admin <span class="op">=</span> <span class="pp">require</span>(<span class="st">'firebase-admin'</span>)<span class="op">;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>admin<span class="op">.</span><span class="fu">initializeApp</span>()<span class="op">;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> messaging <span class="op">=</span> admin<span class="op">.</span><span class="fu">messaging</span>()<span class="op">;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">sendNotification</span>(token<span class="op">,</span> title<span class="op">,</span> body) {</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> message <span class="op">=</span> {</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">notification</span><span class="op">:</span> {</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">title</span><span class="op">:</span> title<span class="op">,</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">body</span><span class="op">:</span> body<span class="op">,</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">token</span><span class="op">:</span> token<span class="op">,</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">try</span> {</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> messaging<span class="op">.</span><span class="fu">send</span>(message)<span class="op">;</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">'Successfully sent message:'</span><span class="op">,</span> response)<span class="op">;</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">catch</span> (error) {</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="st">'Error sending message:'</span><span class="op">,</span> error)<span class="op">;</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co">// Example usage:</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="fu">sendNotification</span>(<span class="st">'YOUR_DEVICE_TOKEN'</span><span class="op">,</span> <span class="st">'New Message'</span><span class="op">,</span> <span class="st">'Check your app!'</span>)<span class="op">;</span></span></code></pre></div>
<p><strong>Client-Side (Android with Firebase SDK):</strong></p>
<p>This snippet shows how to receive a token and handle the notification. Implementation details will vary slightly depending on your notification handling preferences.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Get the Firebase instance ID token.</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>FirebaseInstanceId<span class="op">.</span>getInstance<span class="op">().</span>instanceId<span class="op">.</span>addOnCompleteListener<span class="op">(</span>OnCompleteListener <span class="op">{</span> task <span class="op">-&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>task<span class="op">.</span>isSuccessful<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>        Log<span class="op">.</span>w<span class="op">(</span>TAG<span class="op">,</span> <span class="st">"getInstanceId failed"</span><span class="op">,</span> task<span class="op">.</span>exception<span class="op">)</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>        return<span class="at">@OnCompleteListener</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Get new Instance ID token</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">val</span> <span class="va">token</span> <span class="op">=</span> task<span class="op">.</span>result<span class="op">?.</span>token</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    Log<span class="op">.</span>d<span class="op">(</span>TAG<span class="op">,</span> <span class="st">"token = </span><span class="ss">$token</span><span class="st">"</span><span class="op">)</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Send token to your app server.</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="op">})</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co">// Handling notification in your app's service.</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co">// ... (Notification handling logic using FirebaseMessagingService) ...</span></span></code></pre></div>
</section>
<section id="advanced-features-and-considerations" class="level2">
<h2 data-anchor-id="advanced-features-and-considerations">Advanced Features and Considerations</h2>
<p>Beyond basic notification delivery, push notification systems can incorporate sophisticated features:</p>
<ul>
<li><strong>Segmentation:</strong> Targeting specific user groups based on demographics, behavior, or other attributes.</li>
<li><strong>Scheduling:</strong> Sending notifications at predetermined times or intervals.</li>
<li><strong>A/B Testing:</strong> Experimenting with different notification messages and delivery strategies to optimize engagement.</li>
<li><strong>Analytics:</strong> Tracking notification delivery rates, open rates, and click-through rates to measure effectiveness.</li>
<li><strong>Geolocation:</strong> Sending notifications based on the user’s location.</li>
<li><strong>Personalization:</strong> Tailoring notification content to individual user preferences.</li>
</ul>


</section>

</main> <!-- /main -->
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2025, Muthukrishnan</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>