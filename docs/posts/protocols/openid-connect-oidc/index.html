<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>OpenID Connect (OIDC) – System Design Notes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../favicon.ico" rel="icon">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-5c1aa57916d092647891b8a3fe59897e.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/bootstrap/bootstrap-dark-ee5e052b81fc94e1f9bb89611f476562.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta name="mermaid-theme" content="neutral">
<script src="../../../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../../../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">


<link rel="stylesheet" href="../../../styles.css">
<meta property="og:title" content="OpenID Connect (OIDC) – System Design Notes">
<meta property="og:description" content="">
<meta property="og:site_name" content="System Design Notes">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">System Design Notes</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/muthuspark"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/krimuthu"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">OpenID Connect (OIDC)</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Protocols</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>OpenID Connect (OIDC) is an identity layer built on top of the OAuth 2.0 protocol. It enables clients to verify the identity of users based on the authentication performed by an authorization server and to obtain basic profile information about the user in an interoperable and REST-like manner. OIDC is widely used for Single Sign-On (SSO) and user authentication in modern web and mobile applications.</p>
<p>In this blog post, we will look at the OpenID Connect protocol in detail, including its components, workflows, and key concepts.</p>
<section id="what-is-openid-connect" class="level2">
<h2 data-anchor-id="what-is-openid-connect">What is OpenID Connect?</h2>
<p>OpenID Connect (OIDC) is an authentication protocol that allows applications to verify the identity of users based on the authentication performed by an authorization server. It extends OAuth 2.0 by introducing an <strong>ID Token</strong>, which is a JSON Web Token (JWT) that contains information about the authenticated user.</p>
<p>OIDC is widely used for: - <strong>Single Sign-On (SSO)</strong>: Users can log in once and access multiple applications. - <strong>User Authentication</strong>: Applications can verify the identity of users. - <strong>Profile Information</strong>: Applications can retrieve basic user profile information.</p>
</section>
<section id="how-oidc-extends-oauth-2.0" class="level2">
<h2 data-anchor-id="how-oidc-extends-oauth-2.0">How OIDC Extends OAuth 2.0</h2>
<p>OAuth 2.0 is primarily an <strong>authorization</strong> protocol, while OIDC adds an <strong>authentication</strong> layer on top of it. Here’s how OIDC extends OAuth 2.0: - Introduces the <strong>ID Token</strong> for user authentication. - Adds the <strong>UserInfo endpoint</strong> to retrieve user profile information. - Standardizes the authentication process.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">graph TD
    A[OAuth 2.0] --&gt;|Authorization| B[Access Tokens]
    A --&gt;|Extended by| C[OpenID Connect]
    C --&gt;|Authentication| D[ID Tokens]
    C --&gt;|User Profile| E[UserInfo Endpoint]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="key-components-of-oidc" class="level2">
<h2 data-anchor-id="key-components-of-oidc">Key Components of OIDC</h2>
<p>OIDC introduces several key components: 1. <strong>ID Token</strong>: A JWT that contains information about the authenticated user. 2. <strong>UserInfo Endpoint</strong>: A RESTful endpoint that returns claims about the user. 3. <strong>Discovery Endpoint</strong>: Provides metadata about the OIDC provider. 4. <strong>Dynamic Client Registration</strong>: Allows clients to register with the OIDC provider dynamically.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">graph TD
    A[OpenID Connect] --&gt; B[ID Token]
    A --&gt; C[UserInfo Endpoint]
    A --&gt; D[Discovery Endpoint]
    A --&gt; E[Dynamic Client Registration]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="oidc-workflow" class="level2">
<h2 data-anchor-id="oidc-workflow">OIDC Workflow</h2>
<p>The OIDC workflow involves the following steps: 1. The <strong>Client</strong> redirects the user to the <strong>Authorization Server</strong> for authentication. 2. The user authenticates and grants consent. 3. The <strong>Authorization Server</strong> issues an <strong>ID Token</strong> and optionally an <strong>Access Token</strong>. 4. The <strong>Client</strong> can use the <strong>Access Token</strong> to call the <strong>UserInfo Endpoint</strong> for additional user information.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">sequenceDiagram
    participant User
    participant Client
    participant AuthorizationServer

    User-&gt;&gt;Client: Requests Access
    Client-&gt;&gt;AuthorizationServer: Redirects User for Authentication
    AuthorizationServer-&gt;&gt;User: Prompts for Login
    User-&gt;&gt;AuthorizationServer: Authenticates and Grants Consent
    AuthorizationServer-&gt;&gt;Client: Redirects with ID Token (and Access Token)
    Client-&gt;&gt;AuthorizationServer: Requests UserInfo (optional)
    AuthorizationServer-&gt;&gt;Client: Returns UserInfo
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="id-tokens-and-userinfo-endpoint" class="level2">
<h2 data-anchor-id="id-tokens-and-userinfo-endpoint">ID Tokens and UserInfo Endpoint</h2>
<section id="id-token" class="level3">
<h3 data-anchor-id="id-token">ID Token</h3>
<p>The ID Token is a JWT that contains claims about the authenticated user. Example claims include: - <code>sub</code> (subject): A unique identifier for the user. - <code>iss</code> (issuer): The URL of the authorization server. - <code>aud</code> (audience): The client ID of the application. - <code>exp</code> (expiration): The expiration time of the token.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">graph TD
    A[ID Token] --&gt; B[Header]
    A --&gt; C[Payload]
    A --&gt; D[Signature]
    C --&gt; E[Claims: sub, iss, aud, exp, etc.]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="userinfo-endpoint" class="level3">
<h3 data-anchor-id="userinfo-endpoint">UserInfo Endpoint</h3>
<p>The UserInfo endpoint is a RESTful API that returns additional claims about the user. The client accesses it using the <strong>Access Token</strong>.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">sequenceDiagram
    participant Client
    participant AuthorizationServer

    Client-&gt;&gt;AuthorizationServer: Requests UserInfo with Access Token
    AuthorizationServer-&gt;&gt;Client: Returns UserInfo (e.g., name, email, profile)
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
</section>
<section id="oidc-flows" class="level2">
<h2 data-anchor-id="oidc-flows">OIDC Flows</h2>
<p>OIDC supports multiple flows to accommodate different types of clients and use cases.</p>
<section id="a.-authorization-code-flow" class="level3">
<h3 data-anchor-id="a.-authorization-code-flow">a. Authorization Code Flow</h3>
<p>This is the most secure and widely used flow. It involves two steps: 1. The client obtains an <strong>Authorization Code</strong>. 2. The client exchanges the code for an <strong>ID Token</strong> and <strong>Access Token</strong>.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">sequenceDiagram
    participant User
    participant Client
    participant AuthorizationServer

    User-&gt;&gt;Client: Requests Access
    Client-&gt;&gt;AuthorizationServer: Redirects User for Authentication
    AuthorizationServer-&gt;&gt;User: Prompts for Login
    User-&gt;&gt;AuthorizationServer: Authenticates and Grants Consent
    AuthorizationServer-&gt;&gt;Client: Redirects with Authorization Code
    Client-&gt;&gt;AuthorizationServer: Exchanges Code for ID Token and Access Token
    AuthorizationServer-&gt;&gt;Client: Issues ID Token and Access Token
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="b.-implicit-flow" class="level3">
<h3 data-anchor-id="b.-implicit-flow">b. Implicit Flow</h3>
<p>This flow is designed for browser-based applications. It directly returns the <strong>ID Token</strong> and optionally the <strong>Access Token</strong> without the intermediate authorization code step.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">sequenceDiagram
    participant User
    participant Client
    participant AuthorizationServer

    User-&gt;&gt;Client: Requests Access
    Client-&gt;&gt;AuthorizationServer: Redirects User for Authentication
    AuthorizationServer-&gt;&gt;User: Prompts for Login
    User-&gt;&gt;AuthorizationServer: Authenticates and Grants Consent
    AuthorizationServer-&gt;&gt;Client: Redirects with ID Token (and Access Token)
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="c.-hybrid-flow" class="level3">
<h3 data-anchor-id="c.-hybrid-flow">c.&nbsp;Hybrid Flow</h3>
<p>This flow combines elements of the Authorization Code and Implicit flows. It returns an <strong>ID Token</strong> and an <strong>Authorization Code</strong> in the initial response.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">sequenceDiagram
    participant User
    participant Client
    participant AuthorizationServer

    User-&gt;&gt;Client: Requests Access
    Client-&gt;&gt;AuthorizationServer: Redirects User for Authentication
    AuthorizationServer-&gt;&gt;User: Prompts for Login
    User-&gt;&gt;AuthorizationServer: Authenticates and Grants Consent
    AuthorizationServer-&gt;&gt;Client: Redirects with ID Token and Authorization Code
    Client-&gt;&gt;AuthorizationServer: Exchanges Code for Access Token
    AuthorizationServer-&gt;&gt;Client: Issues Access Token
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
</section>
<section id="oidc-security-best-practices" class="level2">
<h2 data-anchor-id="oidc-security-best-practices">OIDC Security Best Practices</h2>
<p>To ensure the security of OIDC implementations: - Use HTTPS for all communication. - Validate the <code>iss</code> and <code>aud</code> claims in the ID Token. - Use short-lived ID Tokens and refresh tokens. - Implement PKCE (Proof Key for Code Exchange) for public clients. - Regularly rotate client secrets.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/system-design\.muthu\.co\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2025, Muthukrishnan</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>